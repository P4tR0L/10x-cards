---
import { LogoutButton } from "./LogoutButton";

interface Props {
  userEmail?: string;
}

// Get user from Astro locals (set by middleware)
const user = Astro.locals.user;
const { userEmail = user?.email || "UÅ¼ytkownik" } = Astro.props;
---

<header
  class="sticky top-0 z-50 w-full border-b border-white/10 bg-gradient-to-r from-indigo-900/95 via-purple-900/95 to-blue-900/95 backdrop-blur-md"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center space-x-2 text-white hover:text-blue-200 transition-colors">
          <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- First card (back) -->
            <rect x="3" y="7" width="10" height="13" rx="1.5" stroke="currentColor" stroke-width="2" fill="none"></rect>
            <!-- Second card (front) -->
            <rect
              x="11"
              y="4"
              width="10"
              height="13"
              rx="1.5"
              fill="currentColor"
              stroke="currentColor"
              stroke-width="2"></rect>
          </svg>
          <span class="hidden sm:inline-block text-xl font-bold">10x Cards</span>
          <span class="sm:hidden text-lg font-bold">10x</span>
        </a>
      </div>

      <!-- User info and Logout -->
      <div class="flex items-center space-x-4">
        <div class="hidden md:flex items-center space-x-2 text-white/90">
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"></circle>
          </svg>
          <span class="text-sm">{userEmail}</span>
        </div>

        <!-- User initials on mobile -->
        <div
          class="md:hidden flex items-center justify-center h-8 w-8 rounded-full bg-white/20 text-white text-sm font-semibold"
        >
          {userEmail.charAt(0).toUpperCase()}
        </div>

        <LogoutButton client:load />
      </div>
    </div>
  </div>
</header>
